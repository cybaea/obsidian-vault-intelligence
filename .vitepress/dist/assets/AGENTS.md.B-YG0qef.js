import{_ as i,c as a,o as e,ae as n}from"./chunks/framework.DKf8Joaa.js";const c=JSON.parse('{"title":"Obsidian community plugin","description":"","frontmatter":{},"headers":[],"relativePath":"AGENTS.md","filePath":"AGENTS.md"}'),t={name:"AGENTS.md"};function l(o,s,h,d,p,r){return e(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="obsidian-community-plugin" tabindex="-1">Obsidian community plugin <a class="header-anchor" href="#obsidian-community-plugin" aria-label="Permalink to &quot;Obsidian community plugin&quot;">​</a></h1><h2 id="project-overview" tabindex="-1">Project overview <a class="header-anchor" href="#project-overview" aria-label="Permalink to &quot;Project overview&quot;">​</a></h2><ul><li>Target: Obsidian Community Plugin (TypeScript → bundled JavaScript).</li><li>Entry point: <code>main.ts</code> compiled to <code>main.js</code> and loaded by Obsidian.</li><li>Required release artifacts: <code>main.js</code>, <code>manifest.json</code>, and optional <code>styles.css</code>.</li></ul><p>This project is for the Obsidian <strong>Vault Intelligence</strong> plugin, which provides advanced AI-powered features for managing and interacting with your notes. It includes capabilities such as a Research Agent, Adaptive Hybrid Search, and Similar Notes View to enhance your note-taking experience.</p><p>Important context is provided in the following files:</p><ul><li><a href="./README.html">README.md</a>: Overview, installation, configuration, and usage instructions.</li><li><a href="./CHANGELOG.html">CHANGELOG.md</a>: Version history and release notes.</li><li><a href="./CONTRIBUTING.html">CONTRIBUTING.md</a>: Guidelines for contributing to the project.</li><li><a href="./ROADMAP.html">ROADMAP.md</a>: Planned features and improvements.</li><li><a href="./docs/maintainability.html">docs/maintainability.md</a>: Architectural best practices, scoring strategies, and mandatory dependency synchronization procedures.</li><li><a href="./docs/configuration.html">docs/</a>: Additional documentation, including configuration guides, examples, and troubleshooting tips.</li></ul><h2 id="using-latest-technologies" tabindex="-1">Using latest technologies <a class="header-anchor" href="#using-latest-technologies" aria-label="Permalink to &quot;Using latest technologies&quot;">​</a></h2><p><strong>IMPORTANT</strong>: It is now 2026. All the information you have on AI technologies is outdated. Ground yourself using search engines and the latest documentation from OpenAI, Google, and other AI providers. Use the most recent models, techniques, and best practices available.</p><h2 id="environment-tooling" tabindex="-1">Environment &amp; tooling <a class="header-anchor" href="#environment-tooling" aria-label="Permalink to &quot;Environment &amp; tooling&quot;">​</a></h2><ul><li>Node.js: use current LTS (Node 18+ recommended).</li><li><strong>Package manager: npm</strong> (required for this sample - <code>package.json</code> defines npm scripts and dependencies).</li><li><strong>Bundler: esbuild</strong> (required for this sample - <code>esbuild.config.mjs</code> and build scripts depend on it). Alternative bundlers like Rollup or webpack are acceptable for other projects if they bundle all external dependencies into <code>main.js</code>.</li><li>Types: <code>obsidian</code> type definitions.</li></ul><p><strong>Note</strong>: This sample project has specific technical dependencies on npm and esbuild. If you&#39;re creating a plugin from scratch, you can choose different tools, but you&#39;ll need to replace the build configuration accordingly.</p><h3 id="install" tabindex="-1">Install <a class="header-anchor" href="#install" aria-label="Permalink to &quot;Install&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><h3 id="dev-watch" tabindex="-1">Dev (watch) <a class="header-anchor" href="#dev-watch" aria-label="Permalink to &quot;Dev (watch)&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><h3 id="production-build" tabindex="-1">Production build <a class="header-anchor" href="#production-build" aria-label="Permalink to &quot;Production build&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><h2 id="linting" tabindex="-1">Linting <a class="header-anchor" href="#linting" aria-label="Permalink to &quot;Linting&quot;">​</a></h2><ul><li>To use eslint install eslint from terminal: <code>npm install -g eslint</code></li><li>To use eslint to analyze this project use this command: <code>eslint main.ts</code></li><li>eslint will then create a report with suggestions for code improvement by file and line number.</li><li>If your source code is in a folder, such as <code>src</code>, you can use eslint with this command to analyze all files in that folder: <code>eslint ./src/</code></li></ul><h2 id="file-folder-conventions" tabindex="-1">File &amp; folder conventions <a class="header-anchor" href="#file-folder-conventions" aria-label="Permalink to &quot;File &amp; folder conventions&quot;">​</a></h2><ul><li><strong>Organize code into multiple files</strong>: Split functionality across separate modules rather than putting everything in <code>main.ts</code>.</li><li>Source lives in <code>src/</code>. Keep <code>main.ts</code> small and focused on plugin lifecycle (loading, unloading, registering commands).</li><li><strong>Example file structure</strong>:<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/</span></span>
<span class="line"><span>  main.ts           # Plugin entry point, lifecycle management</span></span>
<span class="line"><span>  settings.ts       # Settings interface and defaults</span></span>
<span class="line"><span>  commands/         # Command implementations</span></span>
<span class="line"><span>    command1.ts</span></span>
<span class="line"><span>    command2.ts</span></span>
<span class="line"><span>  ui/              # UI components, modals, views</span></span>
<span class="line"><span>    modal.ts</span></span>
<span class="line"><span>    view.ts</span></span>
<span class="line"><span>  utils/           # Utility functions, helpers</span></span>
<span class="line"><span>    helpers.ts</span></span>
<span class="line"><span>    constants.ts</span></span>
<span class="line"><span>  types.ts         # TypeScript interfaces and types</span></span></code></pre></div></li><li><strong>Do not commit build artifacts</strong>: Never commit <code>node_modules/</code>, <code>main.js</code>, or other generated files to version control.</li><li>Keep the plugin small. Avoid large dependencies. Prefer browser-compatible packages.</li><li>Generated output should be placed at the plugin root or <code>dist/</code> depending on your build setup. Release artifacts must end up at the top level of the plugin folder in the vault (<code>main.js</code>, <code>manifest.json</code>, <code>styles.css</code>).</li></ul><h2 id="manifest-rules-manifest-json" tabindex="-1">Manifest rules (<code>manifest.json</code>) <a class="header-anchor" href="#manifest-rules-manifest-json" aria-label="Permalink to &quot;Manifest rules (\`manifest.json\`)&quot;">​</a></h2><ul><li>Must include (non-exhaustive): <ul><li><code>id</code> (plugin ID; for local dev it should match the folder name)</li><li><code>name</code></li><li><code>version</code> (Semantic Versioning <code>x.y.z</code>)</li><li><code>minAppVersion</code></li><li><code>description</code></li><li><code>isDesktopOnly</code> (boolean)</li><li>Optional: <code>author</code>, <code>authorUrl</code>, <code>fundingUrl</code> (string or map)</li></ul></li><li>Never change <code>id</code> after release. Treat it as stable API.</li><li>Keep <code>minAppVersion</code> accurate when using newer APIs.</li><li>Canonical requirements are coded here: <a href="https://github.com/obsidianmd/obsidian-releases/blob/master/.github/workflows/validate-plugin-entry.yml" target="_blank" rel="noreferrer">https://github.com/obsidianmd/obsidian-releases/blob/master/.github/workflows/validate-plugin-entry.yml</a></li></ul><h2 id="testing" tabindex="-1">Testing <a class="header-anchor" href="#testing" aria-label="Permalink to &quot;Testing&quot;">​</a></h2><ul><li>Manual install for testing: copy <code>main.js</code>, <code>manifest.json</code>, <code>styles.css</code> (if any) to:<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;Vault&gt;/.obsidian/plugins/&lt;plugin-id&gt;/</span></span></code></pre></div></li><li>Reload Obsidian and enable the plugin in <strong>Settings → Community plugins</strong>.</li></ul><h2 id="commands-settings" tabindex="-1">Commands &amp; settings <a class="header-anchor" href="#commands-settings" aria-label="Permalink to &quot;Commands &amp; settings&quot;">​</a></h2><ul><li>Any user-facing commands should be added via <code>this.addCommand(...)</code>.</li><li>If the plugin has configuration, provide a settings tab and sensible defaults.</li><li>Persist settings using <code>this.loadData()</code> / <code>this.saveData()</code>.</li><li>Use stable command IDs; avoid renaming once released.</li></ul><h2 id="versioning-releases" tabindex="-1">Versioning &amp; releases <a class="header-anchor" href="#versioning-releases" aria-label="Permalink to &quot;Versioning &amp; releases&quot;">​</a></h2><ul><li>Bump <code>version</code> in <code>manifest.json</code> (SemVer) and update <code>versions.json</code> to map plugin version → minimum app version.</li><li>Create a GitHub release whose tag exactly matches <code>manifest.json</code>&#39;s <code>version</code>. Do not use a leading <code>v</code>.</li><li>Attach <code>manifest.json</code>, <code>main.js</code>, and <code>styles.css</code> (if present) to the release as individual assets.</li><li>After the initial release, follow the process to add/update your plugin in the community catalog as required.</li></ul><h2 id="security-privacy-and-compliance" tabindex="-1">Security, privacy, and compliance <a class="header-anchor" href="#security-privacy-and-compliance" aria-label="Permalink to &quot;Security, privacy, and compliance&quot;">​</a></h2><p>Follow Obsidian&#39;s <strong>Developer Policies</strong> and <strong>Plugin Guidelines</strong>. In particular:</p><ul><li>Default to local/offline operation. Only make network requests when essential to the feature.</li><li>No hidden telemetry. If you collect optional analytics or call third-party services, require explicit opt-in and document clearly in <code>README.md</code> and in settings.</li><li>Never execute remote code, fetch and eval scripts, or auto-update plugin code outside of normal releases.</li><li>Minimize scope: read/write only what&#39;s necessary inside the vault. Do not access files outside the vault.</li><li>Clearly disclose any external services used, data sent, and risks.</li><li>Respect user privacy. Do not collect vault contents, filenames, or personal information unless absolutely necessary and explicitly consented.</li><li>Avoid deceptive patterns, ads, or spammy notifications.</li><li>Register and clean up all DOM, app, and interval listeners using the provided <code>register*</code> helpers so the plugin unloads safely.</li></ul><h2 id="ux-copy-guidelines-for-ui-text-commands-settings" tabindex="-1">UX &amp; copy guidelines (for UI text, commands, settings) <a class="header-anchor" href="#ux-copy-guidelines-for-ui-text-commands-settings" aria-label="Permalink to &quot;UX &amp; copy guidelines (for UI text, commands, settings)&quot;">​</a></h2><ul><li>Prefer sentence case for headings, buttons, and titles.</li><li>Use clear, action-oriented imperatives in step-by-step copy.</li><li>Use <strong>bold</strong> to indicate literal UI labels. Prefer &quot;select&quot; for interactions.</li><li>Use arrow notation for navigation: <strong>Settings → Community plugins</strong>.</li><li>Keep in-app strings short, consistent, and free of jargon.</li></ul><h2 id="performance" tabindex="-1">Performance <a class="header-anchor" href="#performance" aria-label="Permalink to &quot;Performance&quot;">​</a></h2><ul><li>Keep startup light. Defer heavy work until needed.</li><li>Avoid long-running tasks during <code>onload</code>; use lazy initialization.</li><li>Batch disk access and avoid excessive vault scans.</li><li>Debounce/throttle expensive operations in response to file system events.</li></ul><h2 id="coding-conventions" tabindex="-1">Coding conventions <a class="header-anchor" href="#coding-conventions" aria-label="Permalink to &quot;Coding conventions&quot;">​</a></h2><ul><li>TypeScript with <code>&quot;strict&quot;: true</code> preferred.</li><li><strong>Keep <code>main.ts</code> minimal</strong>: Focus only on plugin lifecycle (onload, onunload, addCommand calls). Delegate all feature logic to separate modules.</li><li><strong>Split large files</strong>: If any file exceeds ~200-300 lines, consider breaking it into smaller, focused modules.</li><li><strong>Use clear module boundaries</strong>: Each file should have a single, well-defined responsibility.</li><li>Bundle everything into <code>main.js</code> (no unbundled runtime deps).</li><li>Avoid Node/Electron APIs if you want mobile compatibility; set <code>isDesktopOnly</code> accordingly.</li><li>Prefer <code>async/await</code> over promise chains; handle errors gracefully.</li><li>Never use <code>any</code> type.</li></ul><h2 id="mobile" tabindex="-1">Mobile <a class="header-anchor" href="#mobile" aria-label="Permalink to &quot;Mobile&quot;">​</a></h2><ul><li>Where feasible, test on iOS and Android.</li><li>Don&#39;t assume desktop-only behavior unless <code>isDesktopOnly</code> is <code>true</code>.</li><li>Avoid large in-memory structures; be mindful of memory and storage constraints.</li></ul><h2 id="agent-do-don-t" tabindex="-1">Agent do/don&#39;t <a class="header-anchor" href="#agent-do-don-t" aria-label="Permalink to &quot;Agent do/don&#39;t&quot;">​</a></h2><p><strong>Do</strong></p><ul><li>Add commands with stable IDs (don&#39;t rename once released).</li><li>Provide defaults and validation in settings.</li><li>Write idempotent code paths so reload/unload doesn&#39;t leak listeners or intervals.</li><li>Use <code>this.register*</code> helpers for everything that needs cleanup.</li></ul><p><strong>Don&#39;t</strong></p><ul><li>Introduce network calls without an obvious user-facing reason and documentation.</li><li>Ship features that require cloud services without clear disclosure and explicit opt-in.</li><li>Store or transmit vault contents unless essential and consented.</li></ul><h2 id="common-tasks" tabindex="-1">Common tasks <a class="header-anchor" href="#common-tasks" aria-label="Permalink to &quot;Common tasks&quot;">​</a></h2><h3 id="organize-code-across-multiple-files" tabindex="-1">Organize code across multiple files <a class="header-anchor" href="#organize-code-across-multiple-files" aria-label="Permalink to &quot;Organize code across multiple files&quot;">​</a></h3><p><strong>main.ts</strong> (minimal, lifecycle only):</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Plugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;obsidian&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MySettings, DEFAULT_SETTINGS } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { registerCommands } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./commands&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  settings</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MySettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.settings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DEFAULT_SETTINGS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    registerCommands</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>settings.ts</strong>:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MySettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  enabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  apiKey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DEFAULT_SETTINGS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MySettings</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  enabled: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  apiKey: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><strong>commands/index.ts</strong>:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Plugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;obsidian&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { doSomething } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./my-command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registerCommands</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">plugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugin.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;do-something&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Do something&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doSomething</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(plugin),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="add-a-command" tabindex="-1">Add a command <a class="header-anchor" href="#add-a-command" aria-label="Permalink to &quot;Add a command&quot;">​</a></h3><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-command-id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Do the thing&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doTheThing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="persist-settings" tabindex="-1">Persist settings <a class="header-anchor" href="#persist-settings" aria-label="Permalink to &quot;Persist settings&quot;">​</a></h3><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MySettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">enabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DEFAULT_SETTINGS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MySettings</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { enabled: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.settings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DEFAULT_SETTINGS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">saveData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.settings);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="register-listeners-safely" tabindex="-1">Register listeners safely <a class="header-anchor" href="#register-listeners-safely" aria-label="Permalink to &quot;Register listeners safely&quot;">​</a></h3><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.app.workspace.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file-open&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }));</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerDomEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(window, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;resize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><ul><li>Plugin doesn&#39;t load after build: ensure <code>main.js</code> and <code>manifest.json</code> are at the top level of the plugin folder under <code>&lt;Vault&gt;/.obsidian/plugins/&lt;plugin-id&gt;/</code>.</li><li>Build issues: if <code>main.js</code> is missing, run <code>npm run build</code> or <code>npm run dev</code> to compile your TypeScript source code.</li><li>Commands not appearing: verify <code>addCommand</code> runs after <code>onload</code> and IDs are unique.</li><li>Settings not persisting: ensure <code>loadData</code>/<code>saveData</code> are awaited and you re-render the UI after changes.</li><li>Mobile-only issues: confirm you&#39;re not using desktop-only APIs; check <code>isDesktopOnly</code> and adjust.</li></ul><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References&quot;">​</a></h2><ul><li>Obsidian Sample Plugin: <a href="https://github.com/obsidianmd/obsidian-sample-plugin" target="_blank" rel="noreferrer">https://github.com/obsidianmd/obsidian-sample-plugin</a></li><li>API documentation: <a href="https://docs.obsidian.md" target="_blank" rel="noreferrer">https://docs.obsidian.md</a></li><li>Developer policies: <a href="https://docs.obsidian.md/Developer+policies" target="_blank" rel="noreferrer">https://docs.obsidian.md/Developer+policies</a></li><li>Plugin guidelines: <a href="https://docs.obsidian.md/Plugins/Releasing/Plugin+guidelines" target="_blank" rel="noreferrer">https://docs.obsidian.md/Plugins/Releasing/Plugin+guidelines</a></li><li>Style guide: <a href="https://help.obsidian.md/style-guide" target="_blank" rel="noreferrer">https://help.obsidian.md/style-guide</a></li></ul>`,63)])])}const g=i(t,[["render",l]]);export{c as __pageData,g as default};
